<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="#(cxt)/"/>
    <link rel="shortcut icon" href="img/favicon.png">

    <title>后台首页</title>

    <!-- Bootstrap CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- bootstrap theme -->
    <link href="css/bootstrap-theme.css" rel="stylesheet">
    <!--external css-->
    <!-- font icon -->
    <link href="css/elegant-icons-style.css" rel="stylesheet"/>
    <link href="css/font-awesome.min.css" rel="stylesheet"/>
    <!-- full calendar css-->
    <link href="assets/fullcalendar/fullcalendar/bootstrap-fullcalendar.css" rel="stylesheet"/>
    <link href="assets/fullcalendar/fullcalendar/fullcalendar.css" rel="stylesheet"/>
    <!-- easy pie chart-->
    <link href="assets/jquery-easy-pie-chart/jquery.easy-pie-chart.css" rel="stylesheet" type="text/css"
          media="screen"/>
    <!-- owl carousel -->
    <link rel="stylesheet" href="css/owl.carousel.css" type="text/css">
    <link href="css/jquery-jvectormap-1.2.2.css" rel="stylesheet">
    <!-- Custom styles -->
    <link rel="stylesheet" href="css/fullcalendar.css">
    <link href="css/widgets.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/style-responsive.css" rel="stylesheet"/>
    <link href="css/xcharts.min.css" rel=" stylesheet">
    <link href="css/jquery-ui-1.10.4.min.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 -->
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <script src="js/lte-ie7.js"></script>
    <![endif]-->

</head>

<body>
<!-- container section start -->
<section id="container" class="">


    <header class="header dark-bg">
        <div class="toggle-nav">
            <div class="icon-reorder tooltips" data-original-title="Toggle Navigation" data-placement="bottom"></div>
        </div>

        <!--logo start-->
        <a class="logo" href="page/food.htm" target="_blank">餐厅<span class="lite">后台管理</span></a>
        <!--logo end-->


        <div class="top-nav notification-row">
            <!-- notificatoin dropdown start-->
            <ul class="nav pull-right top-menu">
                <!-- user login dropdown start-->
                <li class="dropdown">
                    <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                            <span class="profile-ava">
                                <img alt="" src="img/avatar1_small.jpg">
                            </span>
                        <span class="username">#(admin_name)</span>
                        <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu extended logout">
                        <div class="log-arrow-up"></div>

                        <li>
                            <a href="admin/loginout?id=#(admin_id)"><i class="icon_clock_alt"></i>注销登陆</a>
                        </li>
                    </ul>
                </li>
                <!-- user login dropdown end -->
            </ul>
            <!-- notificatoin dropdown end-->
        </div>
    </header>
    <!--header end-->

    <!--sidebar start-->
    <aside>
        <div id="sidebar" class="nav-collapse ">
            <!-- sidebar menu start-->
            <ul class="sidebar-menu">
                <li class="">
                    <a class="" href="admin/index">
                        <i class="icon_house_alt"></i>
                        <span>后台首页</span>
                    </a>
                </li>
                <li class="sub-menu">
                    <a href="javascript:;" class="">
                        <i class="icon_document_alt"></i>
                        <span>信息发布</span>
                        <span class="menu-arrow arrow_carrot-right"></span>
                    </a>
                    <ul class="sub">
                        <li class=""><a class="" href="info/get_info">公司简介</a></li>
                        <li><a class="" href="info/get_info_page">企业资讯</a></li>
                    </ul>
                </li>
                <li>
                    <a class="" href="reserve/get_reserve_list">
                        <i class="icon_genius"></i>
                        <span>用餐预定</span>
                    </a>
                </li>
                <li class="active">
                    <a class="" href="menu/get_menu_list">
                        <i class="icon_piechart"></i>
                        <span>菜单列表</span>
                    </a>
                </li>

            </ul>
            <!-- sidebar menu end-->
        </div>
    </aside>
    <!--sidebar end-->

    <!--main content start-->
    <section id="main-content">
        <section class="wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <h3 class="page-header"><i class="fa fa-align-justify"></i> 菜单列表</h3>
                    <ol class="breadcrumb">
                        <li><i class="fa fa-align-justify"></i>菜单列表</li>
                    </ol>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <!-- Button trigger modal -->
                    <button type="button" class="btn btn-primary btn-lg" onclick="openMyModal()"
                            title="新增企业资讯">
                        <i class="icon_plus_alt2"></i> 新增菜品
                    </button>
                </div>
            </div>
            <br/>
            #for(menu : menuList)
            <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3"
                 id="">
                <div class="thumbnail">
                    <p style="text-align: right">
                        <button type="button" id="b_menu" class="btn btn-default"
                                aria-label="Justify" title="点击删除"
                                onclick="del('#(cxt)/menu/delete_menu?id=#(menu.Id)')">X
                        </button>
                    </p>
                    <form id="form#(menu.Id)" action="menu/update" method="post" enctype="multipart/form-data"
                          style="text-align: center">
                        <input hidden="hidden" type="text" name="menu.Id" value="#(menu.Id)" readonly="readonly"
                               style="display: none;">
                        <p>
                            <img src="upload/#(menu.pic)"
                                 onclick="getElementById('pic#(menu.Id)').click()"
                                 alt="点击上传图片" title="点击上传图片"
                                 id="preview#(menu.Id)"
                                 style="cursor:pointer;width: 200px;"/>
                            <input style="display: none;"
                                   class="common-text required" id="pic#(menu.Id)" name="upload" size="20"
                                   type="file" onchange="change('#(menu.Id)')">
                        </p>
                        <div class="caption" style="text-align: center">
                            <h3>
                                <div class="form-group">
                                    <label class="control-label col-sm-4"
                                           style="text-align: right;font-size: 18px;">菜名:</label>
                                    <div class="col-sm-8">
                                        <input class="form-control" type="text" name="menu.title" value=" #(menu.title)"
                                               size="10"/>
                                    </div>
                                </div>
                            </h3>
                            <p>
                            <div class="form-group">
                                <label class="control-label col-sm-4"
                                       style="text-align: right;font-size: 18px;">价格(元):</label>
                                <div class="col-sm-8">
                                    <input class="form-control" type="number" name="menu.price" value="#(menu.price)"
                                           size="10"/>
                                </div>
                            </div>
                            </p>
                            <p style="text-align: left">
                            <div class="form-group">
                                <label class="control-label col-sm-4"
                                       style="text-align: right;font-size: 18px;">描述:</label>
                                <div class="col-sm-8">
                                    <input class="form-control" type="text" name="menu.describe"
                                           value="#(menu.describe)" size="10"/>
                                </div>
                            </div>
                            </p>
                        </div>
                    </form>
                    <p style="text-align: center">
                        <button class="btn btn-default" type="button"
                                onclick="formSubmit('#(menu.Id)')">保存
                        </button>
                    </p>

                </div>
            </div>
            #end
        </section>
    </section>
    <!--main content end-->
</section>
<!-- container section start -->
<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">新增或修改企业资讯</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" id="form" action="menu/update" method="post"
                      enctype="multipart/form-data">
                    <!--date picker start-->
                    <div class="form-group">
                        <label class="control-label col-sm-4">菜名：</label>
                        <div class="col-sm-6">
                            <input type="text" name="menu.title" value="" size="16"
                                   class="form-control">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-4">价格(元)：</label>
                        <div class="col-sm-6">
                            <input type="number" name="menu.price" value="" size="16"
                                   class="form-control">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-4">上传图片：</label>
                        <div class="col-sm-8">
                            <img id="preview" alt="请选择图片上传"
                                 name="preview" width="260"
                                 src="img/logo-big.png"><br> <input
                                class="common-text required" id="pic" name="upload" size="20"
                                type="file" onchange="change('')">
                        </div>
                    </div>
                    <!-- CKEditor -->
                    <div class="form">
                        <div class="form-group">
                            <label class="control-label col-sm-2">描述：</label>
                            <div class="col-sm-8">
                                <textarea class="form-control "  name="menu.describe"
                                          rows="8" title=""></textarea>
                            </div>
                        </div>
                    </div>
                    <!--date picker end-->

                </form>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="formSubmit('')">保存</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
            </div>
        </div>
    </div>
</div>
<!-- javascripts -->
<script src="js/jquery.js"></script>
<script src="js/jquery-ui-1.10.4.min.js"></script>
<script src="js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.9.2.custom.min.js"></script>
<!-- bootstrap -->
<script src="js/bootstrap.min.js"></script>
<!-- nice scroll -->
<script src="js/jquery.scrollTo.min.js"></script>
<script src="js/jquery.nicescroll.js" type="text/javascript"></script>
<!-- charts scripts -->
<script src="assets/jquery-knob/js/jquery.knob.js"></script>
<script src="js/jquery.sparkline.js" type="text/javascript"></script>
<script src="assets/jquery-easy-pie-chart/jquery.easy-pie-chart.js"></script>
<script src="js/owl.carousel.js"></script>
<!-- jQuery full calendar -->
<
<script src="js/fullcalendar.min.js"></script> <!-- Full Google Calendar - Calendar -->
<script src="assets/fullcalendar/fullcalendar/fullcalendar.js"></script>
<!--script for this page only-->
<script src="js/calendar-custom.js"></script>
<script src="js/jquery.rateit.min.js"></script>
<!-- custom select -->
<script src="js/jquery.customSelect.min.js"></script>
<script src="assets/chart-master/Chart.js"></script>

<!--custome script for all page-->
<script src="js/scripts.js"></script>
<!-- custom script for this page-->
<script src="js/sparkline-chart.js"></script>
<script src="js/easy-pie-chart.js"></script>
<script src="js/jquery-jvectormap-1.2.2.min.js"></script>
<script src="js/jquery-jvectormap-world-mill-en.js"></script>
<script src="js/xcharts.min.js"></script>
<script src="js/jquery.autosize.min.js"></script>
<script src="js/jquery.placeholder.min.js"></script>
<script src="js/gdp-data.js"></script>
<script src="js/morris.min.js"></script>
<script src="js/sparklines.js"></script>
<script src="js/charts.js"></script>
<script src="js/jquery.slimscroll.min.js"></script>
<!-- ck editor -->
<script type="text/javascript" src="assets/ckeditor/ckeditor.js"></script>
<script>
    function openMyModal() {
        //打开模态框
        $('#myModal').modal('toggle');
    }

    function del(url) {
        if (confirm("确认删除吗?")) {
            window.location.href = url;
        }
    }

    function formSubmit(id) {
        if (confirm("确认保存吗?")) {
            document.getElementById("form" + id).submit();
        }
    }

    function change(id) {
        var pic = document.getElementById("preview" + id),
            file = document.getElementById("pic" + id);

        var ext = file.value.substring(file.value.lastIndexOf(".") + 1).toLowerCase();

        // gif在IE浏览器暂时无法显示
        if (ext != 'png' && ext != 'jpg' && ext != 'jpeg' && ext != 'gif') {
            alert("图片的格式必须为png或者jpg或者jpeg或者gif格式！");
            return;
        }
        var isIE = navigator.userAgent.match(/MSIE/) != null,
            isIE6 = navigator.userAgent.match(/MSIE 6.0/) != null;

        if (isIE) {
            file.select();
            var reallocalpath = document.selection.createRange().text;

            // IE6浏览器设置img的src为本地路径可以直接显示图片
            if (isIE6) {
                pic.src = reallocalpath;
            } else {
                // 非IE6版本的IE由于安全问题直接设置img的src无法显示本地图片，但是可以通过滤镜来实现
                pic.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod='image',src=\"" + reallocalpath + "\")";
                // 设置img的src为base64编码的透明图片 取消显示浏览器默认图片
                pic.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==';
            }
        } else {
            html5Reader(file, id);
        }
    }

    function html5Reader(file, id) {
        var file = file.files[0];
        var reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = function (e) {
            var pic = document.getElementById("preview" + id);
            pic.src = this.result;
        }
    }

    //knob
    $(function () {
        $(".knob").knob({
            'draw': function () {
                $(this.i).val(this.cv + '%')
            }
        })
    });
    //carousel
    $(document).ready(function () {
        $("#owl-slider").owlCarousel({
            navigation: true,
            slideSpeed: 300,
            paginationSpeed: 400,
            singleItem: true

        });
    });

    //custom select box

    $(function () {
        $('select.styled').customSelect();
    });

    /* ---------- Map ---------- */
    $(function () {
        $('#map').vectorMap({
            map: 'world_mill_en',
            series: {
                regions: [{
                    values: gdpData,
                    scale: ['#000', '#000'],
                    normalizeFunction: 'polynomial'
                }]
            },
            backgroundColor: '#eef3f7',
            onLabelShow: function (e, el, code) {
                el.html(el.html() + ' (GDP - ' + gdpData[code] + ')');
            }
        });
    });


</script>

</body>
</html>
